<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: middleware/validation.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: middleware/validation.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const {body,param,validationResult}=require('express-validator');

/**
 * Rules to validating POST requests
 * Guarantee that title or content should not be empty and should be valid. And the values not should be more than 200 characters
 * @type {Array&lt;Function>} 
 */
const validateNotePost=[
    body('title')
        .trim()
        .notEmpty().withMessage('Title esta vacío we')
        .isLength({max:200}).withMessage('El valor de title debe tener maximo 200 caracteres'),
    body('content')
        .trim()
        .notEmpty().withMessage('content esta vacío we')
        .isLength({max:200}).withMessage('El valor de content debe tener maximo 200 caracteres'),
        /**
         * Internal Middleware to verify results of Express-Validator
         * @param {Object} req - Express Request
         * @param {Object} res - Express Response
         * @param {Function} next - Next-Function, next to other validator-middleware or directly to the Controllers  
         * @returns {void} just a error response to client
         */
    (req,res,next)=>{
        const errors=validationResult(req);
        if (!errors.isEmpty()) {
            return res.status(400).json({ 
                success: false, 
                errors: errors.array().map(err => ({
                field: err.path,
                message: err.msg
                }))
             });
        }
        next();
    }
];

/**
 * Rules to validating PUT requests
 * Guarantee that title or content should not be empty and should be valid. And the values not should be more than 200 characters.
 * Besides,the title and content field are be optionals, but their formats should be valid
 * @type {Array&lt;Function>} 
 */
const validateNotePut=[
    body('title')
        .trim()
        .optional()
        .notEmpty().withMessage('Title esta vacío we')
        .isLength({max:200}).withMessage('El valor de title debe tener maximo 200 caracteres'),
    body('content')
        .trim()
        .optional()
        .notEmpty().withMessage('content esta vacío we')
        .isLength({max:200}).withMessage('El valor de content debe tener maximo 200 caracteres'),
    /**
     * Internal Middleware to verify results of Express-Validator
     * @param {Object} req - Express Request
     * @param {Object} res - Express Response
     * @param {Function} next - Next-Function, next to other validator-middleware or directly to the Controllers  
     * @returns {void} just a error response to client
     */
    (req,res,next)=>{
        const errors=validationResult(req);
        if (!errors.isEmpty()) {
            return res.status(400).json({ 
                success: false, 
                errors: errors.array().map(err => ({
                field: err.path,
                message: err.msg
        }))
    });
}
next();
}
];


/**
 * Rules to validating the id parameter in the URL
 * Guarantee that id must be a positive integer.
 * @type {Array&lt;Function>} 
 */
const validateId=[
    param('id')
    .isInt({min:1}).withMessage('Id debe ser positivo'),
    /**
     * Internal Middleware to verify results of Express-Validator
     * @param {Object} req - Express Request
     * @param {Object} res - Express Response
     * @param {Function} next - Next-Function, next to other validator-middleware or directly to the Controllers  
     * @returns  {void} just a error response to client
     */
    (req, res, next) => {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ 
        success: false, 
        error: 'Formato de ID inválido' 
      });
    }
    next();
  }
];

module.exports={
    validateNotePost,
    validateNotePut,
    validateId
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#createNote">createNote</a></li><li><a href="global.html#deleteNote">deleteNote</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#errorHandler">errorHandler</a></li><li><a href="global.html#getAllNotes">getAllNotes</a></li><li><a href="global.html#getNoteById">getNoteById</a></li><li><a href="global.html#responseSuccessDelete">responseSuccessDelete</a></li><li><a href="global.html#responseSuccessGet">responseSuccessGet</a></li><li><a href="global.html#responseSuccessPost">responseSuccessPost</a></li><li><a href="global.html#responseSuccessPut">responseSuccessPut</a></li><li><a href="global.html#updateNote">updateNote</a></li><li><a href="global.html#validateId">validateId</a></li><li><a href="global.html#validateNotePost">validateNotePost</a></li><li><a href="global.html#validateNotePut">validateNotePut</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Fri Jan 09 2026 22:52:22 GMT-0500 (Ecuador Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
